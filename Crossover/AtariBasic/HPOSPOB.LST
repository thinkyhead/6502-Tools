;
; Mapping the Atari Page 109
; HPOSPO Example B
;

1G.200

; Joystick control
98POKEHPOS,X
99V=P1+Y
100G.115-STICK(0)
101U=USR(UP,V):Y=Y-1:G.99
102D=USR(DOWN,V):Y=Y+1:G.99
103G.100
104X=X-1:POKEHPOS,X:G.100
105X=X-1:U=USR(UP,V):Y=Y-1:G.98
106X=X-1:D=USR(DOWN,V):Y=Y+1:G.98
107G.100
108X=X+1:POKEHPOS,X:G.100
109X=X+1:U=USR(UP,V):Y=Y-1:G.98
110X=X+1:D=USR(DOWN,V):Y=Y+1:G.98
111G.100
112G.100
113G.100
114G.100
115G.100

; Lines 200 to 270 set up the player
200HPOS=53248:KEEP=PEEK(106)-16
210POKE106,KEEP:POKE54279,KEEP
220GR.0:POKE752,1:?:POKE710,0:POKE704,78:POKE559,46:POKE53277,3
230PMBASE=KEEP*256:P1=PMBASE+511
240F.LOOP=P1 TOP1+127:POKELOOP,O:N.LOOP:. Clear out memory first
250X=120:Y=10
260F.LOOP=1TO8:READBYTE:POKEP1+Y+LOOP,BYTE:N.LOOP:. Player graphics into memory
270D.129,153,189,255,255,189,153,129

; Lines 300 to 360 set up machine language routine
300DIMUP$(21),DOWN$(21):UP=ADR(UP$):DOWN=ADR(DOWN$)
310F.LOOP=UP TOUP+20:READBYTE:POKELOOP,BYTE:N.LOOP
320F.LOOP=DOWN TODOWN+20:READBYTE:POKELOOP,BYTE:N.LOOP
325G.98
330D.104,104,133,204,104,133,203,160,1,177
340D.203,136,145,203,200,200,192,11,208,245,96
350D.104,104,133,204,104,133,203,160,10,177
360D.203,200,145,203,136,136,192,255,208,245,96
